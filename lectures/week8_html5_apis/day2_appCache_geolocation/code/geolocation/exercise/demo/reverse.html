<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title>Google Reverse Geocode Example</title>
        <script type="text/javascript" src="http://www.arctictiger.se/resources/js/jquery-1.3.1.min.js"></script>
        <script src="http://code.google.com/apis/gears/gears_init.js" type="text/javascript"></script>
        <script src="geo.js" type="text/javascript" ></script>


        <script>
           $(document).ready(function() {
               if(geo_position_js.init()){
                geo_position_js.getCurrentPosition(success_callback,error_callback,{enableHighAccuracy:true});
            }
            else{
                alert("Functionality not available");
            }

            function success_callback(p)
            {
                var lat = p.coords.latitude.toFixed(2)
                var lng = p.coords.longitude.toFixed(2)
                $.getJSON("http://maps.google.com/maps/geo?q="+ lat + "," + lng + "&output=json&sensor=true_or_false&Key=ABQIAAAA60OvlRzcqrM2_wTFhVbvOBRCcKzIo6o9Lsn_KxJHfxrEWkKy3RTbgD8-iPpmb5mc-X8n0Sy7wKZSkQ&callback=?",
                    function(data){
                        $("#geocode").html(data.Placemark[0].address);
                });
                $("#map").html("<img src='http://maps.google.com/maps/api/staticmap?center="+ lat + "," + lng + "&maptype=hybrid&zoom=18&size=300x250&markers=color:blue|label:S|"+ lat + "," + lng + "&sensor=false&key=ABQIAAAA60OvlRzcqrM2_wTFhVbvOBRCcKzIo6o9Lsn_KxJHfxrEWkKy3RTbgD8-iPpmb5mc-X8n0Sy7wKZSkQ' />");
            }

            function error_callback(p)
            {
                alert('error='+p.message);
            }
           });
        </script>


        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <h1>Reverse Geocode</h1>
        <div id="geocode" ></div>
        <div id="map" ></div>

    </body>

</html>
